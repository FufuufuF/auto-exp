# 工作流程规则

## 整体流程

本项目的工作流程分为以下几个阶段，必须按顺序执行：

### 阶段 1：读取并整理实验背景资料

**目标**：将 `background/` 目录下的富文本文件转换为 markdown 格式

**步骤**：
1. 扫描 `background/` 目录，列出所有需要读取的文件（PDF、Word、PPT）
2. 对每个文件调用 MCP 工具进行读取：
   - 优先使用 `read_method="py"` 模式
   - 如果 py 模式返回的内容完全不可用，再使用 `read_method="LLM"` 模式
3. 将读取的内容整理为结构化的 markdown 文件
4. 保存到 `background/cursor/` 目录，文件名与原文件对应
5. 在 markdown 中添加必要的标题、章节划分和格式优化

**输出检查**：
- 每个背景资料文件都有对应的 markdown 文件
- markdown 文件内容完整、格式规范
- 关键知识点清晰可读

### 阶段 2：读取并整理实验报告模板

**目标**：将 `experiment_report/` 目录下的文件转换为 markdown 格式

**步骤**：
1. 扫描 `experiment_report/` 目录，列出所有文件
2. 使用 MCP 工具读取文件内容（优先 py 模式）
3. 分析文件内容，区分：
   - **实验报告模板**：包含报告的结构、格式要求
   - **实验任务描述**：包含具体要完成的实验内容
4. 将内容整理为清晰的 markdown 文件：
   - 如果模板和任务在同一文件中，拆分为两个 markdown 文件
   - 提取报告的各个章节结构
   - 标注哪些部分需要填写、哪些部分需要截图
   - 整体目录格式要求尽可能与模版一致
5. 保存到 `experiment_report/cursor/` 目录

**输出检查**：
- 至少有一个模板文件和一个任务文件（或合并文件）
- 明确标注了需要完成的实验任务列表
- 明确标注了报告的结构要求

### 阶段 3：分析实验任务

**目标**：理解实验任务的具体要求

**步骤**：
1. 仔细阅读整理好的任务 markdown 文件
2. 提取所有实验任务，形成任务列表
3. 对每个任务进行分析：
   - 任务目标是什么
   - 需要用到哪些背景知识
   - 需要编写哪些代码
   - 需要在报告中写什么
4. 规划代码文件的组织结构

**输出检查**：
- 明确了所有需要完成的任务
- 理解了每个任务的具体要求
- 规划了代码的文件结构

### 阶段 4：完成实验任务

**目标**：编写代码完成实验任务

**步骤**：
1. 按照任务顺序，逐个完成实验任务
2. 对每个任务：
   - 参考背景资料中的相关知识
   - 编写符合要求的代码
   - 将代码保存到 `exp/src/` 或 `src/` 目录（根据任务性质决定）
   - 运行代码验证功能正确性
   - 记录代码的关键逻辑和运行结果
3. 保持代码风格统一：
   - 添加必要的注释
   - 使用清晰的变量命名
   - 模块化设计

**输出检查**：
- 所有任务都有对应的代码文件
- 代码能够正常运行
- 代码逻辑清晰、注释完整

### 阶段 5：撰写实验报告

**目标**：按照模板要求撰写完整的实验报告

**步骤**：
1. 创建实验报告文件（根据模板格式，可能是 markdown 或其他格式）
2. 按照模板的章节结构，逐节填写：
   - **实验目的**：根据任务要求总结
   - **实验原理**：引用背景资料中的知识
   - **实验步骤**：描述完成任务的步骤
   - **实验代码**：插入编写的代码（使用代码块）
   - **运行结果**：描述代码运行结果
   - **实验分析**：分析实验结果，总结收获
3. 在需要截图的位置插入明确的提示：
   ```markdown
   【截图位置】请在此处插入 XXX 的截图
   ```
4. 检查报告的完整性和规范性

**输出检查**：
- 报告包含模板要求的所有章节
- 各章节内容完整、准确
- 代码和文字说明对应
- 截图位置已明确标注

### 阶段 6：最终检查

**目标**：确保所有任务完成且质量达标

**步骤**：
1. 检查 `background/cursor/` 和 `experiment_report/cursor/` 目录，确认所有资料已整理
2. 检查 `exp/src/` 或 `src/` 目录，确认所有代码已编写
3. 检查实验报告，确认内容完整
4. 运行所有代码，确认功能正确
5. 向用户汇报完成情况，列出：
   - 已完成的任务列表
   - 生成的文件清单
   - 需要用户补充的内容（如截图）

## 注意事项

1. **严格按照顺序执行**：不要跳过任何阶段
2. **主动性**：不要等待用户指令，主动完成每个阶段
3. **完整性**：每个阶段完成后再进入下一阶段
4. **文档化**：所有整理的内容都要保存为文件，方便追溯
5. **沟通**：每完成一个阶段，简要告知用户进度
